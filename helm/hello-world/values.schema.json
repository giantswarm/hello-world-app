{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "type": "object",
    "required": [],
    "properties": {
        "affinity": {
            "type": "object",
            "title": "Affinity",
            "description": "If specified, this will be injected as the main pod's affinity settings. This allows to schedule the pod on nodes with specific labels. It's fine to leave this empty.",
            "required": [],
            "additionalProperties": true
        },
        "autoscaling": {
            "type": "object",
            "title": "Automatic scaling",
            "description": "This section is for setting up autoscaling more information can be found here: https://kubernetes.io/docs/concepts/workloads/autoscaling/",
            "required": [],
            "properties": {
                "enabled": {
                    "type": "boolean",
                    "title": "Enabled",
                    "description": "If set to true, a HorizontalPodAutoscaler resource will be created to automatically to automatically scale the number of replicas based on the CPU and memory usage.",
                    "default": true
                },
                "maxReplicas": {
                    "type": "integer",
                    "title": "Max replicas",
                    "description": "Maximum number of replicas to scale to. Make sure to set a value that is higher than the minReplicas value.",
                    "default": 10,
                    "minimum": 1
                },
                "minReplicas": {
                    "type": "integer",
                    "title": "Min replicas",
                    "description": "Minimum number of replicas to scale to. For testing purposes, 1 is recommended.",
                    "default": 1,
                    "minimum": 1
                },
                "targetCPUUtilizationPercentage": {
                    "type": "integer",
                    "title": "Target CPU utilization percentage",
                    "description": "Influences the scaling behaviour based on the CPU usage.",
                    "default": 80,
                    "maximum": 100,
                    "minimum": 10
                },
                "targetMemoryUtilizationPercentage": {
                    "type": "integer",
                    "title": "Target memory utilization percentage",
                    "description": "Influences the scaling behaviour based on the memory usage.",
                    "default": 80,
                    "maximum": 100,
                    "minimum": 10
                }
            }
        },
        "fullnameOverride": {
            "type": "string",
            "title": "Full name override",
            "description": "If set, this name will be used instead of a generated name for resource naming.",
            "default": ""
        },
        "gateway": {
            "type": "object",
            "title": "Gateway API configuration",
            "description": "Options related to Gateway API. This is the recommended way to expose the service in production from Kubernetes 1.30 onwards.",
            "required": [
                "hosts"
            ],
            "properties": {
                "annotations": {
                    "type": "object",
                    "title": "Annotations",
                    "examples": [
                        {
                            "cert-manager.io/cluster-issuer": "letsencrypt-giantswarm"
                        }
                    ],
                    "required": [],
                    "patternProperties": {
                        "^[a-zA-Z0-9/-_\\.]+$": {
                            "type": "string",
                            "title": "Annotation value"
                        }
                    }
                },
                "enabled": {
                    "type": "boolean",
                    "title": "Enabled",
                    "description": "If set to false, no Gateway resource will be created. When enabling this, make sure to set .ingress.enabled to false.",
                    "default": false
                },
                "hosts": {
                    "type": "array",
                    "title": "Hosts",
                    "items": {
                        "type": "string"
                    }
                },
                "name": {
                    "type": "string",
                    "title": "Name",
                    "default": "default"
                },
                "namespace": {
                    "type": "string",
                    "title": "Namespace",
                    "default": ""
                }
            }
        },
        "global": {
            "type": "object",
            "title": "global",
            "description": "Global values are values that can be accessed from any chart or subchart by exactly the same name.",
            "required": []
        },
        "image": {
            "type": "object",
            "title": "Container image",
            "description": "Container image for the main pod. In this case, it's a little web server serving a single static page. See https://github.com/giantswarm/helloworld for details.",
            "required": [],
            "properties": {
                "pullPolicy": {
                    "title": "Pull policy",
                    "description": "Pull policy for the container image. 'IfNotPresent' if recommended.",
                    "enum": [
                        "IfNotPresent",
                        "Always",
                        "Never"
                    ],
                    "default": "IfNotPresent",
                    "required": []
                },
                "registry": {
                    "type": "string",
                    "title": "Registry",
                    "description": "Fully qualified registry host name. The default should be kept.",
                    "default": "gsoci.azurecr.io",
                    "format": "hostname"
                },
                "repository": {
                    "type": "string",
                    "title": "Repository",
                    "description": "Container image repository name in the form of `namespace/repository`. The default value should be kept for all cases.",
                    "default": "giantswarm/helloworld"
                },
                "tag": {
                    "type": "string",
                    "title": "Tag",
                    "description": "Overrides the image tag whose default is the chart appVersion. Only overwrite this if you know what you are doing.",
                    "default": ""
                }
            }
        },
        "imagePullSecrets": {
            "type": "array",
            "title": "imagePullSecrets",
            "description": "Optional, if pulling any container image requires authentication.",
            "items": {
                "type": "object",
                "required": [],
                "properties": {
                    "name": {
                        "type": "string",
                        "description": "Name of the secret resource"
                    }
                }
            }
        },
        "ingress": {
            "type": "object",
            "title": "Ingress",
            "description": "Options for Ingress. This is deprecated in favor of Gateway API.",
            "deprecated": true,
            "required": [
                "hosts"
            ],
            "properties": {
                "annotations": {
                    "type": "object",
                    "title": "Optional ingress annotations",
                    "description": "These annotations will be set on the Ingress resource. When in doubt, check the documentation for the ingress controller you are using.",
                    "examples": [
                        "kubernetes.io/ingress.class: nginx",
                        "kubernetes.io/tls-acme: 'true'"
                    ],
                    "required": [],
                    "patternProperties": {
                        "^[a-zA-Z0-9/-_\\.]+$": {
                            "type": "string",
                            "title": "Annotation value"
                        }
                    },
                    "properties": {
                        "cert-manager.io/cluster-issuer": {
                            "title": "cert-manager.io/cluster-issuer",
                            "description": "Cert-manager certificate issuer to use. To issue a TLS certificate via Let's Encrypt, use 'letsencrypt-giantswarm'.",
                            "default": "letsencrypt-giantswarm",
                            "required": []
                        }
                    }
                },
                "className": {
                    "type": "string",
                    "title": "Class",
                    "default": "nginx"
                },
                "enabled": {
                    "type": "boolean",
                    "title": "Enabled",
                    "description": "If set to false, no Ingress resource will be created.",
                    "default": true
                },
                "hosts": {
                    "type": "array",
                    "title": "Hosts",
                    "description": "You will have to overwrite the hosts values to make it match your cluster's ingress subdomain, matching the names used as ingress hosts.",
                    "items": {
                        "type": "object",
                        "required": [],
                        "properties": {
                            "host": {
                                "type": "string",
                                "description": "Hostname to expose the service for. Make sure to use the base domain matching you cluster.",
                                "examples": [
                                    "hello.myinstallation.gaws.gigantic.io"
                                ],
                                "format": "hostname"
                            },
                            "paths": {
                                "type": "array",
                                "items": {
                                    "type": "object",
                                    "required": [],
                                    "properties": {
                                        "path": {
                                            "type": "string"
                                        },
                                        "pathType": {
                                            "type": "string",
                                            "enum": [
                                                "Prefix",
                                                "Exact"
                                            ]
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tls": {
                    "type": "array",
                    "title": "Transport layer security (TLS)",
                    "description": "The host names here have to match the ones configured as .ingress.hosts[].host. Required for TLS certificate issuance.",
                    "items": {
                        "type": "object",
                        "required": [],
                        "properties": {
                            "hosts": {
                                "type": "array",
                                "description": "Hostnames to use the TLS server certificate for.",
                                "items": {
                                    "type": "string",
                                    "format": "hostname"
                                }
                            },
                            "secretName": {
                                "type": "string",
                                "description": "Name of the secret containing the TLS server certificate."
                            }
                        }
                    }
                }
            }
        },
        "livenessProbe": {
            "type": "object",
            "title": "Liveness probe",
            "description": "This is to setup the liveness and readiness probes more information can be found here: https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/",
            "required": [],
            "properties": {
                "httpGet": {
                    "type": "object",
                    "title": "HTTP GET",
                    "required": [],
                    "properties": {
                        "path": {
                            "type": "string",
                            "title": "Path",
                            "description": "Path to probe for liveness. Since the webapp only has one endpoint, the root path is used.",
                            "default": "/"
                        },
                        "port": {
                            "type": "string",
                            "title": "Port",
                            "description": "The port to probe for liveness. The pod only exposes the HTTP port, so 'http' is used.",
                            "default": "http"
                        }
                    }
                }
            }
        },
        "nameOverride": {
            "type": "string",
            "title": "Name override",
            "description": "If set, this name will be used instead of Chart.Name for resource naming.",
            "default": ""
        },
        "nodeSelector": {
            "type": "object",
            "title": "Node selector",
            "description": "If specified, this app will only be deployed to nodes with matching labels. It's fine to leave this empty.",
            "required": [],
            "patternProperties": {
                "^[a-zA-Z0-9/-_\\.]+$": {
                    "$ref": "https://schema.giantswarm.io/labelvalue/v0.0.1",
                    "required": []
                }
            }
        },
        "podAnnotations": {
            "type": "object",
            "title": "Pod annotations",
            "description": "Optional annotations to be added to the main pod.",
            "required": [],
            "patternProperties": {
                "^[a-zA-Z0-9/-_\\.]+$": {
                    "type": "string",
                    "title": "Annotation value"
                }
            }
        },
        "podDisruptionBudget": {
            "type": "object",
            "title": "Pod disruption budget",
            "description": "Configures a PodDisruptionBudget resource to protect the pod from being disrupted.",
            "required": [],
            "properties": {
                "enabled": {
                    "type": "boolean",
                    "title": "Enabled",
                    "description": "If set to false, no PodDisruptionBudget resource will be created.",
                    "default": true
                },
                "maxUnavailable": {
                    "type": "integer",
                    "title": "Max unavailable",
                    "description": "Maximum number of replicas to be unavailable during disruptions.\nDefine either 'minAvailable' or 'maxUnavailable', never both. TODO: Fix this.",
                    "default": 1
                },
                "minAvailable": {
                    "type": "integer",
                    "title": "Min available",
                    "description": "Minimum number of replicas to be unavailable during disruptions.\nDefine either 'minAvailable' or 'maxUnavailable', never both. TODO: Fix this.",
                    "default": 1
                }
            }
        },
        "podLabels": {
            "type": "object",
            "title": "Pod labels",
            "description": "Optional labels to be added to the main pod.",
            "required": [],
            "patternProperties": {
                "^[a-zA-Z0-9/-_\\.]+$": {
                    "$ref": "https://schema.giantswarm.io/labelvalue/v0.0.1",
                    "required": []
                }
            }
        },
        "podSecurityContext": {
            "type": "object",
            "title": "Pod security context",
            "description": "Security context of the main pod.",
            "required": [],
            "properties": {
                "fsGroup": {
                    "type": "integer"
                }
            }
        },
        "readinessProbe": {
            "type": "object",
            "title": "Readiness probe",
            "description": "Similar to the liveness probe, but for the readiness probe.",
            "required": [],
            "properties": {
                "httpGet": {
                    "type": "object",
                    "title": "HTTP GET",
                    "required": [],
                    "properties": {
                        "path": {
                            "type": "string",
                            "title": "Path",
                            "description": "Path to probe for readiness.",
                            "default": "/"
                        },
                        "port": {
                            "type": "string",
                            "title": "Port",
                            "description": "The port to probe for readiness.",
                            "default": "http"
                        }
                    }
                }
            }
        },
        "replicaCount": {
            "type": "integer",
            "title": "Replica count",
            "description": "Number of replicas to deploy for the main pod. For testing purposes, 1 is recommended.",
            "default": 1,
            "minimum": 1
        },
        "resources": {
            "type": "object",
            "title": "Resource requests and limits",
            "description": "This is directly injected as the main pods's resource requests and limits. For testing purposes, the defaults will be fine.",
            "required": [],
            "properties": {
                "limits": {
                    "type": "object",
                    "title": "Limits",
                    "required": [],
                    "properties": {
                        "cpu": {
                            "type": "string",
                            "title": "CPU",
                            "default": "50m"
                        },
                        "memory": {
                            "type": "string",
                            "title": "Memory",
                            "default": "100Mi"
                        }
                    }
                },
                "requests": {
                    "type": "object",
                    "title": "Requests",
                    "required": [],
                    "properties": {
                        "cpu": {
                            "type": "string",
                            "title": "CPU",
                            "examples": [
                                "100m",
                                "1"
                            ],
                            "default": "10m"
                        },
                        "memory": {
                            "type": "string",
                            "title": "Memory",
                            "examples": [
                                "100M",
                                "1Gi"
                            ],
                            "default": "50Mi"
                        }
                    }
                }
            }
        },
        "securityContext": {
            "type": "object",
            "title": "Security context",
            "description": "This object will be inserted into the deployment as the main pod's SecurityContext.",
            "required": [],
            "properties": {
                "allowPrivilegeEscalation": {
                    "type": "boolean",
                    "title": "allowPrivilegeEscalation",
                    "default": false
                },
                "capabilities": {
                    "type": "object",
                    "title": "capabilities",
                    "required": [],
                    "properties": {
                        "drop": {
                            "type": "array",
                            "title": "drop",
                            "items": {
                                "type": "string"
                            }
                        }
                    }
                },
                "readOnlyRootFilesystem": {
                    "type": "boolean",
                    "title": "readOnlyRootFilesystem",
                    "default": true
                },
                "runAsNonRoot": {
                    "type": "boolean",
                    "title": "runAsNonRoot",
                    "default": true
                },
                "runAsUser": {
                    "type": "integer",
                    "title": "runAsUser",
                    "default": 1000
                },
                "seccompProfile": {
                    "type": "object",
                    "title": "seccompProfile",
                    "required": [],
                    "properties": {
                        "type": {
                            "title": "type",
                            "enum": [
                                "RuntimeDefault",
                                "Localhost"
                            ],
                            "default": "RuntimeDefault",
                            "required": []
                        }
                    }
                }
            }
        },
        "service": {
            "type": "object",
            "title": "Service",
            "required": [],
            "properties": {
                "type": {
                    "title": "Type",
                    "enum": [
                        "ClusterIP",
                        "NodePort",
                        "LoadBalancer",
                        "ExternalName"
                    ],
                    "default": "ClusterIP",
                    "required": []
                },
                "annotations": {
                    "type": "object",
                    "title": "Optional service annotations",
                    "required": [],
                    "patternProperties": {
                        "^[a-zA-Z0-9/-_\\.]+$": {
                            "type": "string",
                            "title": "Annotation value"
                        }
                    }
                },
                "labels": {
                    "type": "object",
                    "title": "Optional service labels",
                    "required": [],
                    "patternProperties": {
                        "^[a-zA-Z0-9/-_\\.]+$": {
                            "$ref": "https://schema.giantswarm.io/labelvalue/v0.0.1",
                            "required": []
                        }
                    }
                },
                "port": {
                    "type": "integer",
                    "title": "Port",
                    "default": 80
                }
            }
        },
        "serviceAccount": {
            "type": "object",
            "title": "Service account",
            "description": "Settings related to the service account.",
            "required": [],
            "properties": {
                "annotations": {
                    "type": "object",
                    "title": "annotations",
                    "description": "Annotations to add to the service account.",
                    "required": [],
                    "patternProperties": {
                        "^[a-zA-Z0-9/-_\\.]+$": {
                            "type": "string",
                            "title": "Annotation value"
                        }
                    }
                },
                "automount": {
                    "type": "boolean",
                    "title": "Mount automatically",
                    "description": "Automatically mount the service account into the pod.",
                    "default": false
                },
                "create": {
                    "type": "boolean",
                    "title": "Create",
                    "description": "Specifies whether a service account should be created",
                    "default": true
                },
                "name": {
                    "type": "string",
                    "title": "Name",
                    "description": "The name of the service account to use.\nIf not set and create is true, a name is generated using the fullname template",
                    "default": ""
                }
            }
        },
        "serviceMonitor": {
            "type": "object",
            "title": "Service monitor",
            "description": "To configure a service monitor for the service.",
            "required": [],
            "properties": {
                "enabled": {
                    "type": "boolean",
                    "title": "Enabled",
                    "description": "If set to false, no ServiceMonitor resource will be created.",
                    "default": false
                }
            }
        },
        "strategy": {
            "type": "object",
            "title": "Update strategy",
            "description": "The update strategy to use for the deployment. For testing purposes, the default RollingUpdate is recommended.",
            "required": [],
            "properties": {
                "type": {
                    "title": "Type",
                    "enum": [
                        "Recreate",
                        "RollingUpdate"
                    ],
                    "default": "RollingUpdate",
                    "required": []
                },
                "rollingUpdate": {
                    "type": "object",
                    "title": "Rolling update strategy details",
                    "description": "Details of the rolling update strategy. For testing purposes, the default values will be fine.",
                    "required": [],
                    "properties": {
                        "maxSurge": {
                            "type": "integer",
                            "title": "Max surge",
                            "description": "Maximum number of replicas that can be created during the update. For testing purposes, 1 is recommended.",
                            "default": 1
                        },
                        "maxUnavailable": {
                            "type": "integer",
                            "title": "Max unavailable",
                            "description": "Maximum number of replicas that can be unavailable during the update. For testing purposes, 1 is recommended.",
                            "default": 1
                        }
                    }
                }
            }
        },
        "tolerations": {
            "type": "array",
            "title": "Tolerations",
            "description": "If specified, this will be injected as the main pod's tolerations settings. This allows to run the pod on nodes with specific taints. It's fine to leave this empty.",
            "items": {
                "type": "object",
                "required": [],
                "properties": {
                    "effect": {
                        "type": "string",
                        "description": "Effect of the taint",
                        "enum": [
                            "NoSchedule",
                            "PreferNoSchedule",
                            "NoExecute"
                        ]
                    },
                    "key": {
                        "type": "string",
                        "description": "Key of the taint"
                    },
                    "operator": {
                        "type": "string",
                        "description": "Operator of the taint",
                        "enum": [
                            "Exists",
                            "Equal"
                        ],
                        "default": "Equal"
                    },
                    "value": {
                        "type": "string",
                        "description": "Value of the taint"
                    }
                }
            }
        },
        "topologySpreadConstraints": {
            "type": "array",
            "title": "Topology spread constraints",
            "description": "If specified, this will be injected as the main pod's topologySpreadConstraints spec.",
            "items": {
                "type": "object",
                "required": [],
                "additionalProperties": true
            }
        },
        "volumeMounts": {
            "type": "array",
            "title": "Volume mounts",
            "description": "Additional volumeMounts on the output Deployment definition.",
            "items": {
                "type": "object",
                "required": [],
                "properties": {
                    "mountPath": {
                        "type": "string",
                        "description": "Path to mount the volume"
                    },
                    "name": {
                        "type": "string",
                        "description": "Name of the volume"
                    },
                    "readOnly": {
                        "type": "boolean",
                        "description": "Whether the volume is read-only"
                    }
                }
            }
        },
        "volumes": {
            "type": "array",
            "title": "Volumes",
            "description": "Additional volumes on the output Deployment definition. For testing purposes, no additional volumes are needed.",
            "items": {
                "type": "object",
                "required": [],
                "properties": {
                    "name": {
                        "type": "string",
                        "description": "Name of the volume"
                    },
                    "secret": {
                        "type": "object",
                        "required": [],
                        "properties": {
                            "optional": {
                                "type": "boolean",
                                "description": "Whether the secret is optional"
                            },
                            "secretName": {
                                "type": "string",
                                "description": "Name of the secret"
                            }
                        }
                    }
                }
            }
        }
    }
}
