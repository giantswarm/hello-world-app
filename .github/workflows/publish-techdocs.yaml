name: Publish TechDocs
on:
  push:
    paths:
      - 'README.md'
      - 'docs/**' # markdown or any images in docs
      - 'helm/**/README.md'
      - '.github/workflows/**' # TODO: delete
    branches:
      - main
      - add-techdocs-workflow
  workflow_dispatch: {}

jobs:
  publish:
    uses: giantswarm/workflows-public/.github/workflows/publish-techdocs.yaml@430a9dc4f25cda3153a07e654b3b2bcb4610158f
    with:
      aws_access_key_id: ${{ secrets.TECHDOCS_S3_ACCESS_KEY_ID }}
      aws_secret_access_key: ${{ secrets.TECHDOCS_S3_SECRET_ACCESS_KEY }}
